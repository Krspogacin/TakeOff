<h1 mat-dialog-title>Registration</h1>
<mat-dialog-content [formGroup]="registrationForm" class="fields-container" id="scrollId">
    <mat-form-field>
        <input matInput type="text" formControlName="username" placeholder="Username">
        <mat-error *ngIf="registrationForm.get('username').invalid && (registrationForm.get('username').dirty || registrationForm.get('username').touched)">
            <div *ngIf="registrationForm.get('username').errors.required"> Username is required.</div>
            <div *ngIf="!registrationForm.get('username').errors.required &&
                        (registrationForm.get('username').errors.minlength || registrationForm.get('username').errors.maxlength)">
                        Invalid username length!
            </div>
            <div *ngIf="registrationForm.get('username').errors.usernameExists"> User with username <i>{{registrationForm.value.username}}</i> already exists.</div>
        </mat-error>
        <mat-hint>
                Username length must be between {{usernameMinLength}} and {{usernameMaxLength}}. <br>
        </mat-hint>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="password" formControlName="password" placeholder="Password">
        <mat-error *ngIf="registrationForm.get('password').invalid && (registrationForm.get('password').dirty || registrationForm.get('password').touched)">
            <div *ngIf="registrationForm.get('password').errors.required"> Password is required.</div>
            <div *ngIf="!registrationForm.get('password').errors.required &&
                        (registrationForm.get('password').errors.minlength || registrationForm.get('password').errors.maxlength)">
                        Invalid password length!
            </div>
        </mat-error>
        <mat-hint>
                Password length must be between {{passwordMinLength}} and {{passwordMaxLength}}.
        </mat-hint>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="password" formControlName="confirmPassword" placeholder="Confirm password">
        <mat-error *ngIf="registrationForm.get('confirmPassword').invalid && (registrationForm.get('confirmPassword').dirty || registrationForm.get('confirmPassword').touched)">
            <div *ngIf="registrationForm.get('confirmPassword').errors.required"> Confirming password is required.</div>
            <div *ngIf="!registrationForm.get('confirmPassword').errors.required && registrationForm.get('confirmPassword').errors.mustMatch">Password does not match!</div>
        </mat-error>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="email" formControlName="email" placeholder="Email">
        <mat-error *ngIf="registrationForm.get('email').invalid && (registrationForm.get('email').dirty || registrationForm.get('email').touched)">
            <div *ngIf="registrationForm.get('email').errors.required"> Email is required.</div>
            <div *ngIf="!registrationForm.get('email').errors.required && registrationForm.get('email').errors.email"> Invalid email format!</div>
            <div *ngIf="registrationForm.get('email').errors.emailExists"> User with email <i>{{registrationForm.value.email}}</i> already exists.</div>
        </mat-error>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="text" formControlName="firstName" placeholder="First name">
        <mat-error *ngIf="registrationForm.get('firstName').invalid && (registrationForm.get('firstName').dirty || registrationForm.get('firstName').touched)">
            <div *ngIf="registrationForm.get('firstName').errors.required"> First name is required.</div>
        </mat-error>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="text" formControlName="lastName" placeholder="Last name">
        <mat-error *ngIf="registrationForm.get('lastName').invalid && (registrationForm.get('lastName').dirty || registrationForm.get('lastName').touched)">
            <div *ngIf="registrationForm.get('lastName').errors.required"> Last name is required.</div>
        </mat-error>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="text" formControlName="phoneNumber" placeholder="Phone number">
        <mat-error *ngIf="registrationForm.get('phoneNumber').invalid && (registrationForm.get('phoneNumber').dirty || registrationForm.get('phoneNumber').touched)">
            <div *ngIf="registrationForm.get('phoneNumber').errors.required"> Phone number is required.</div>
            <div *ngIf="registrationForm.get('phoneNumber').errors.pattern"> Invalid phone number format!.</div>
        </mat-error>
        <mat-hint>
                Example: 123-456
        </mat-hint>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="text" formControlName="address" placeholder="Address">
        <mat-error *ngIf="registrationForm.get('address').invalid && (registrationForm.get('address').dirty || registrationForm.get('address').touched)">
            <div *ngIf="registrationForm.get('address').errors.required"> Address is required.</div>
        </mat-error>
    </mat-form-field>
    <br>
    <mat-form-field>
        <input matInput type="date" formControlName="dateOfBirth" placeholder="Date of birth">
    </mat-form-field>
    <br>
    <mat-form-field>
        <textarea matInput type="text" rows="5" formControlName="aboutMe" placeholder="Describe yourself"></textarea>
    </mat-form-field>
    <div class="img-container">
        <img *ngIf="selectedFile" class="img-preview" src={{imgSrc}} alt="Could not load image."/>
    </div>
    <button mat-button color="primary" class="btn-loadImg" (click)="fileInput.click()"><mat-icon>add_circle_outline</mat-icon> Add a profile photo</button>
    <input [hidden]="true" type="file" accept="image/*" (change)="onFileSelected($event)" #fileInput>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-raised-button color="primary" type="submit" (click)="submitForm()" [disabled]="registrationForm.invalid">Submit</button>
  <button mat-raised-button [mat-dialog-close]>Cancel</button>
</mat-dialog-actions>